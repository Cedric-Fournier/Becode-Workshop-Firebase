<!DOCTYPE html>
<html lang="fr" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="./style.css">
    <title>Workshop Google Firebase</title>

    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
    <script>
      // Initialize Firebase
      const config = {
        apiKey: "AIzaSyB90CMYuzH3AgbDn_8_SCJVBVCrMnDEDao",
        authDomain: "cedric-fournier.firebaseapp.com",
        databaseURL: "https://cedric-fournier.firebaseio.com",
        projectId: "cedric-fournier",
        storageBucket: "cedric-fournier.appspot.com",
        messagingSenderId: "105643866558"
      };
      firebase.initializeApp(config);

      const database = firebase.database();

      // // Je crée les noms en FR de mon Objet
      // const keyLang = {
      //   birthday: "Anniversaire",
      //   city: "Ville",
      //   firstname: "Prénom",
      //   lastname: "Nom",
      //   mail: "E-mail"
      // };

      // function writeData(form) {
      //   database.ref('users/' + userId).push().set({
      //     firstname: form.firstname.value,
      //     lastname: form.lastname.value,
      //     birthday: form.birthday.value,
      //     city: form.city.value,
      //     mail: form.mail.value
      //   });
      // }

      function writeData(form) {
        console.log('hello');
        var userRef =  database.ref('users/').push();
        console.log(userRef);
        userRef.set({
          firstname: form.firstname.value,
          lastname: form.lastname.value,
          birthday: form.birthday.value,
          city: form.city.value,
          mail: form.mail.value
        })
        .then(function() {
          console.log("Add succeeded.");
        })
        .catch(function(error) {
          console.log("Add failed: " + error.message);
        });
      }

      // var messageListRef = database.ref('message_list');
      // var newMessageRef = messageListRef.push();
      // newMessageRef.set({
      //   'user_id': 'ada',
      //   'text': 'The Analytical Engine weaves algebraical patterns just as the Jacquard loom weaves flowers and leaves.'
      // });
      // var path = newMessageRef.toString();

    </script>

  </head>
  <body>

    <div class="AddUpDel">
      <h1>Firebase est ton ami !</h1>

      <h2>Add Object (Ajouter une personne)</h2>
      <form class="addFirebase" onsubmit="writeData(this); return false" method="post">
        <label>Nom: </label><input type="text" name="lastname" placeholder="Nom"><br>
        <label>Prénom: </label><input type="text" name="firstname" placeholder="Prénom"><br>
        <label>Anniversaire: </label><input type="text" name="birthday" placeholder="Annversaire"><br>
        <label>Ville: </label><input type="text" name="city" placeholder="Ville"><br>
        <label>E-mail: </label><input type="email" name="mail" placeholder="E-mail"><br>
        <button type="submit" name="button">Envoyer</button>
        <button type="reset" name="button">Clear</button>
      </form>

      <div class="display">
        <h2>Affichage DB</h2>
        <ul id="myList">
        </ul>
      </div>
    </div>

  </body>
</html>
