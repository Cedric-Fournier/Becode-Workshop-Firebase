<!DOCTYPE html>
<html lang="fr" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="./style.css">
    <title>Workshop Google Firebase</title>


    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
    <script>
      // Initialize Firebase
      const config = {
        apiKey: "AIzaSyB90CMYuzH3AgbDn_8_SCJVBVCrMnDEDao",
        authDomain: "cedric-fournier.firebaseapp.com",
        databaseURL: "https://cedric-fournier.firebaseio.com",
        projectId: "cedric-fournier",
        storageBucket: "cedric-fournier.appspot.com",
        messagingSenderId: "105643866558"
      };
      firebase.initializeApp(config);

      const database = firebase.database();

      // Je crée les noms en FR de mon Objet
      const keyLang = {
        birthday: "Anniversaire",
        city: "Ville",
        firstname: "Prénom",
        lastname: "Nom",
        mail: "E-mail"
      };

      // Afficher mes Objets
      const rootRef = database.ref();
      rootRef.once("value")
        .then((snapshot) => {
          // for(item in snapshot) => {
          snapshot.forEach((item) => {
            const data = item.val();

            let newData = {
              firstname: data.firstname,
              lastname: data.lastname,
              birthday: data.birthday,
              city: data.city,
              mail: data.mail
            }

            let nodeUser = document.createElement("LI");
            let nodeUserUL = document.createElement("UL");

            for(let i in newData) {
              let propertyValue = document.createTextNode(keyLang[i] + " : " + newData[i]);
              let nodeUserLI = document.createElement("LI");
              nodeUserLI.appendChild(propertyValue);
              nodeUserUL.appendChild(nodeUserLI);
            }

            nodeUser.appendChild(nodeUserUL);
            document.getElementById("myList").appendChild(nodeUser);
          });
        });

        function writeData(userId, name, email, imageUrl) {
          database.ref('cedric-fournier/').set({
            firstname: fistname,
            lastname: lastname,
            birthday: birthday,
            city: city,
            mail: mail
          });
        }



    </script>

  </head>
  <body>
    <ul id="myList">
    </ul>
  </body>
</html>
